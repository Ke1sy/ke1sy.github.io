(function(t){function e(e){for(var n,r,o=e[0],c=e[1],u=e[2],l=0,d=[];l<o.length;l++)r=o[l],s[r]&&d.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);f&&f(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,r=1;r<a.length;r++){var o=a[r];0!==s[o]&&(n=!1)}n&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},r={app:0},s={app:0},i=[];function o(t){return c.p+"js/"+({404:"404",Catalog:"Catalog",Favourites:"Favourites",Movies:"Movies",Posts:"Posts",Product:"Product",Subscribe:"Subscribe"}[t]||t)+"."+{404:"4813ddc5",Catalog:"d863dff2",Favourites:"64d4ed45",Movies:"9c041da7",Posts:"b015466e",Product:"520c9eaa",Subscribe:"6575e97e"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={Catalog:1,Favourites:1,Movies:1,Posts:1,Product:1,Subscribe:1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise(function(e,a){for(var n="css/"+({404:"404",Catalog:"Catalog",Favourites:"Favourites",Movies:"Movies",Posts:"Posts",Product:"Product",Subscribe:"Subscribe"}[t]||t)+"."+{404:"31d6cfe0",Catalog:"9c1f7a22",Favourites:"61a472ef",Movies:"3c914bc7",Posts:"fb9b7ae6",Product:"cce1b3fe",Subscribe:"05a9e61d"}[t]+".css",s=c.p+n,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===s))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===n||l===s)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||s,i=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete r[t],f.parentNode.removeChild(f),a(i)},f.href=s;var v=document.getElementsByTagName("head")[0];v.appendChild(f)}).then(function(){r[t]=0}));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise(function(e,a){n=s[t]=[e,a]});e.push(n[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t),u=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=s[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+n+": "+r+")");i.type=n,i.request=r,a[1](i)}s[t]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/vue-learn/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"118c":function(t,e,a){},"36da":function(t,e,a){"use strict";var n=a("77a1"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("1157"),r=a.n(n),s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("headerPart"),a("main",[a("router-view")],1),a("app-cart"),a("footer")],1)},o=[],c=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"cart"},[a("h3",[t._v("Корзина")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.cartLength,expression:"cartLength"}],staticClass:"cart-content"},[t._m(0),t._l(t.cartItems,function(e){return a("div",{staticClass:"cart-item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col col-3"},[t._v(t._s(t.getFromCart(e.id).title))]),a("div",{staticClass:"col col-3"},[a("button",{staticClass:"btn btn-danger",attrs:{disabled:1===e.count},on:{click:function(a){return t.changeCount(-1,e.id)}}},[t._v("-")]),a("span",{staticClass:"amount"},[t._v(t._s(e.count))]),a("button",{staticClass:"btn btn-success",attrs:{disabled:e.count>=t.$store.getters.getById(e.id,"products").inventory},on:{click:function(a){return t.changeCount(1,e.id)}}},[t._v("+")])]),a("div",{staticClass:"col col-2"},[t._v(t._s(t._f("fixed")(t.getFromCart(e.id).price)))]),a("div",{staticClass:"col col-2"},[t._v(t._s(t._f("fixed")(e.count*t.getFromCart(e.id).price)))]),a("div",{staticClass:"col col-2"},[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.deleteFromCart(e.id)}}},[t._v("\n                      Удалить\n                    ")])])])])}),a("div",{staticClass:"row head-row"},[a("div",{staticClass:"col col-3"}),a("div",{staticClass:"col col-3"}),a("div",{staticClass:"col col-2"}),a("div",{staticClass:"col col-2"},[t._v(t._s(t.totalSum))]),a("div",{staticClass:"col col-2"})]),a("br"),a("p",[t._v("Товаров в корзине: "+t._s(t.cartLength))])],2),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.cartLength,expression:"!cartLength"}],staticClass:"cart-content"},[a("p",[t._v("В корзине нет товаров!")])])])]),t._m(1)])])])}),u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row head-row"},[a("div",{staticClass:"col col-3"},[t._v("Название:")]),a("div",{staticClass:"col col-3"},[t._v("Количество:")]),a("div",{staticClass:"col col-2"},[t._v("Цена:")]),a("div",{staticClass:"col col-2"},[t._v("Сумма:")]),a("div",{staticClass:"col col-2"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Закрыть")])])}],l=(a("ac6a"),{data:function(){return{cartItems:this.$store.state.inCart}},computed:{cartLength:function(){var t=this.$store.state.inCart,e=0;return t.forEach(function(t,a){e+=t.count}),e},totalSum:function(){return this.$store.getters.getTotalSum}},methods:{changeCount:function(t,e){this.$store.commit("changeInCart",{id:e,val:t})},getFromCart:function(t){return this.$store.getters.getById(t,"products")},deleteFromCart:function(t){this.$store.commit("deleteFromCart",t)}},filters:{fixed:function(t){return t.toFixed(2)}}}),d=l,f=(a("985d"),a("2877")),v=Object(f["a"])(d,c,u,!1,null,"34a0bc6e",null),h=v.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("div",{staticClass:"container"},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/","active-class":"active",exact:""}},[t._v("Posts")]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[a("ul",{staticClass:"navbar-nav"},[a("router-link",{staticClass:"nav-item",attrs:{"active-class":"active",to:"/",tag:"li",exact:""}},[a("a",{staticClass:"nav-link"},[t._v("Home")])]),a("router-link",{staticClass:"nav-item",attrs:{"active-class":"active",to:"/posts",tag:"li",exact:""}},[a("a",{staticClass:"nav-link"},[t._v("Posts")])]),a("router-link",{staticClass:"nav-item",attrs:{"active-class":"active",to:"/catalog",tag:"li",exact:""}},[a("a",{staticClass:"nav-link"},[t._v("Catalog")])]),a("router-link",{staticClass:"nav-item",attrs:{"active-class":"active",to:"/favourites",tag:"li",exact:""}},[a("a",{staticClass:"nav-link"},[t._v("Favourites")])]),a("router-link",{staticClass:"nav-item",attrs:{"active-class":"active",to:"/subscribe",tag:"li",exact:""}},[a("a",{staticClass:"nav-link"},[t._v("Subscribe")])]),a("router-link",{staticClass:"nav-item",attrs:{"active-class":"active",to:"/movies",tag:"li",exact:""}},[a("a",{staticClass:"nav-link"},[t._v("Movies")])])],1)]),a("router-link",{staticClass:"nav-link",attrs:{to:"/favourites","active-class":"active",exact:""}},[a("span",{staticClass:"like",attrs:{title:"Liked posts"}},[a("span",{staticClass:"like-count"},[t._v(t._s(t.findFavourites.length))])])]),a("span",{attrs:{title:"Cart"},on:{click:function(e){return t.openCart()}}},[a("span",{staticClass:"cart-icon"},[a("span",{staticClass:"like-count"},[t._v(t._s(t.inCartLength))])])])],1)])])},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],g=a("cebc"),b=a("2f62"),C={methods:{openCart:function(){r()("#exampleModal").modal("show")}},computed:Object(g["a"])({},Object(b["b"])(["inCartLength","findFavourites"]))},k=C,_=(a("d351"),Object(f["a"])(k,p,m,!1,null,"c24dad88",null)),y=_.exports,x={data:function(){return{apiUrls:this.$store.state.apiUrls}},methods:{},computed:{categoriesLoaded:function(){return this.$store.state.categoriesLoaded}},components:{headerPart:y,"app-cart":h},created:function(){this.$store.dispatch("getApiUrls",this.$root.url)},watch:{categoriesLoaded:function(t){if(t&&!this.$store.state.categoriesChecked){var e=this.$route.query.cat;"undefined"!==e&&this.$store.commit("checkCategories",{selected:e})}},$route:function(t,e){var a=this;switch(t.name){case"movies":this.$store.state.categoriesLoaded||this.$nextTick(function(){setTimeout(function(){a.$store.dispatch("getArray",{el:"categoriesLoaded",callback:"changeArr",array:"categories"})},2e3)}),this.$store.state.moviesLoaded||this.$nextTick(function(){setTimeout(function(){a.$store.dispatch("getArray",{el:"moviesLoaded",callback:"changeArr",array:"movies"})},3e3)});break;case"posts":this.$store.state.postsLoaded||this.$nextTick(function(){setTimeout(function(){a.$store.dispatch("getArray",{el:"postsLoaded",callback:"changePosts",array:"posts"})},3e3)});break;case"subscribe":this.$store.state.teamLoaded||this.$nextTick(function(){setTimeout(function(){a.$store.dispatch("getArray",{el:"teamLoaded",callback:"changeArr",array:"team"})},1e3)});break;case"catalog":case"product":this.$store.state.productsLoaded||this.$nextTick(function(){setTimeout(function(){a.$store.dispatch("getArray",{el:"productsLoaded",callback:"changeArr",array:"products"})},100)});break}}}},$=x,w=(a("5c0b"),Object(f["a"])($,i,o,!1,null,null,null)),L=w.exports,P=a("8c4f"),T=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},S=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("br")])}],F={name:"home",data:function(){return{}},components:{},provide:function(){return{}}},O=F,E=(a("36da"),Object(f["a"])(O,T,S,!1,null,"6ce03ae6",null)),A=E.exports;s["a"].use(P["a"]);var j=function(){return a.e("404").then(a.bind(null,"8cdb"))},M=new P["a"]({mode:"history",base:"/vue-learn/",routes:[{path:"/",name:"home",component:A},{path:"/posts",name:"posts",component:function(){return a.e("Posts").then(a.bind(null,"17c3"))}},{path:"/favourites",name:"favourites",component:function(){return a.e("Favourites").then(a.bind(null,"0e0d"))}},{path:"/subscribe",name:"subscribe",component:function(){return a.e("Subscribe").then(a.bind(null,"f057"))}},{path:"/catalog",name:"catalog",component:function(){return a.e("Catalog").then(a.bind(null,"247d"))}},{path:"/product/:id",name:"product",component:function(){return a.e("Product").then(a.bind(null,"d2f1"))}},{path:"/movies",name:"movies",component:function(){return a.e("Movies").then(a.bind(null,"da27"))}},{path:"/none",redirect:"/"},{path:"*",name:"404",component:j}]}),I=a("7618"),N=(a("c5f6"),a("7514"),a("bc3a")),B=a.n(N),U=a("a7fe"),W=a.n(U);s["a"].use(b["a"]),s["a"].use(W.a,B.a);var q=new b["a"].Store({state:{apiUrls:!1,inCart:[],products:[],productsLoaded:!1,posts:[],postsLoaded:!1,teamLoaded:!1,team:[],movies:[],categories:[],moviesLoaded:!1,categoriesLoaded:!1,categoriesChecked:!1,moviesToWatch:[]},getters:{movieIsActive:function(t){return function(e){return t.moviesToWatch.indexOf(e)>-1}},getById:function(t){return function(e,a){return t[a].find(function(t){return t.id===e})}},getByName:function(t){return function(e,a){return t[a].find(function(t){return t.name===e})}},findFavourites:function(t){return t.posts.filter(function(t){return t.liked})},findBySearch:function(t){return function(e){return t.posts.filter(function(t){return t.title.indexOf(e)>=0})}},getImg:function(t){return function(e){return t.products.find(function(t){return t.id===e}).img}},inCartLength:function(t){return t.inCart.length},getFromCart:function(t){return function(e){return t.inCart.find(function(t){return t.id===e})}},getTotalSum:function(t){var e=0;return t.inCart.forEach(function(a){var n=t.products.find(function(t){return t.id===a.id}).price;e+=n*a.count}),e.toFixed(2)},checkedCategories:function(t){return t.categories.filter(function(t){return t.checked})},checkedCategoriesIds:function(t,e){var a=[];return e.checkedCategories.forEach(function(t){return a.push(t.id)}),a},filteredMovies:function(t,e){return e.checkedCategoriesIds.length?t.movies.filter(function(t){return e.checkedCategoriesIds.indexOf(Number(t.category))>-1}):t.movies}},mutations:{removePost:function(t,e){var a=this.getters.getById(e.id,"posts");this.state.posts.splice(a,1)},willWatch:function(t,e){var a=t.moviesToWatch.indexOf(e);-1===a?t.moviesToWatch.push(e):t.moviesToWatch.splice(a,1)},addLike:function(t,e){var a=this.getters.getById(e,"posts");a.liked?a.likeCount--:a.likeCount++,a.liked=!a.liked},addToCart:function(t,e){t.inCart.push(e)},updateCart:function(t,e){var a=t.inCart.find(function(t){return t.id===e.id});a.count+=e.count},changeInCart:function(t,e){var a=t.inCart.find(function(t){return t.id===e.id});a.count+=e.val},deleteFromCart:function(t,e){t.inCart.forEach(function(a,n){if(a.id===e)return t.inCart.splice(n,1),!1})},changePosts:function(t,e){for(var a=e.data,n=0;n<10;n++)a[n].liked=!1,a[n].likeCount=0,this.state.posts.push(a[n])},changeArr:function(t,e){for(var a=e.data.data,n=e.array,r=0;r<a.length;r++)this.state[n].push(a[r])},checkCategories:function(t,e){var a=e.selected;if("string"===typeof a){var n=t.categories.find(function(t){return t.id===Number(a)});n.checked=!0}else"object"===Object(I["a"])(a)&&t.categories.forEach(function(t){a.indexOf(String(t.id))>-1&&(t.checked=!0)});t.categoriesChecked=!0}},actions:{getArray:function(t,e){var a=this,n=e.el,r=e.array,i=e.callback,o=this.getters.getByName(r,"apiUrls").url;s["a"].axios.get(o).then(function(t){a.commit({type:i,data:t.data,array:r}),a.state[n]=!0}).catch(function(t){console.warn(t),a.state[n]=!0})},addToTeam:function(t,e){var a=this;setTimeout(function(){var t=Number(a.state.team[a.state.team.length-1].id)+1,n=Object.assign({id:t},e);a.state.team.push(n)},2e3)},getApiUrls:function(t,e){var a=this;s["a"].axios.get(e).then(function(t){a.state.apiUrls=t.data.urls},function(t){console.warn(t)})},testToServer:function(t){}},watch:{}});a("f0bd"),a("4989");s["a"].config.productionTip=!1,new s["a"]({data:function(){return{url:""}},router:M,store:q,beforeMount:function(){this.url=this.$el.attributes["data-url"].value},render:function(t){return t(L)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5e27":function(t,e,a){},"77a1":function(t,e,a){},"985d":function(t,e,a){"use strict";var n=a("118c"),r=a.n(n);r.a},bfcc:function(t,e,a){},d351:function(t,e,a){"use strict";var n=a("bfcc"),r=a.n(n);r.a}});
//# sourceMappingURL=app.dd1370dc.js.map